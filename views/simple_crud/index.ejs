<html>

<head>
    <style>
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 100px;
        }

        .nav {
            width: 100%;
            padding: 10px 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 500px;
            background-color: rgb(47, 70, 24);
        }

        .logo {
            float: left;
        }

        .btns {
            float: right;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }

        .btn {
            background-color: rgb(56, 122, 223);
            color: white;
            border: 2px solid white;
            padding: 5px 10px;
            border-radius: 10px;
        }

        a {
            color: white;
            text-decoration: none;
        }

        .hobby {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }

        .gender {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }

        .item {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        span {
            color: red;
            font-size: 10px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="nav">
            <div class="logo">
                <h2 style="color:white">Student Portal</h2>
            </div>
            <div class="btns"><button class="btn" id="login"><a href="/simple_crud_login">Login</a></button>
                <button class="btn" id="view"><a href="/simple_crud_list">View List</a></button>
            </div>
        </div>
        <% if(isError){ %>
          
                <form action="/" method="post" onsubmit="return validate(event);">
                    <table>
                        <caption>
                            <h4>Students Registration Form</h4>
                        </caption>
                        <tr>
                            <td><label for="fname">First Name:</label></td>
                            <td><input class="req" type="text" id="fname" name="fname"
                                    value="<%=dataObj.fname%>" /><span class="err"> <%=errElement.fname%></span></td>
                        </tr>
                        <tr>
                            <td><label for="lname">Last Name:</label></td>
                            <td><input class="req" type="text" id="lname" name="lname"
                                    value="<%=dataObj.lname%>" /><span class="err"> <%=errElement.lname%></span></td>
                        </tr>
                        <tr>
                            <td><label for="age">Age:</label></td>
                            <td><input class="req" type="text" id="age" name="age" value="<%=dataObj.age%>" /><span
                                    class="err"> <%=errElement.age%></span></td>
                        </tr>
                        <tr>
                            <td><label for="pass">Password:</label></td>
                            <td><input class="req" type="text" id="pass" name="pass" value="<%=dataObj.pass%>" /><span
                                    class="err"> <%=errElement.pass%></span></td>
                        </tr>
                        <tr>
                            <td><label for="con">Contact:</label></td>
                            <td><input class="req" type="text" id="con" name="con" value="<%=dataObj.con%>" /><span
                                    class="err"> <%=errElement.con%></span> </td>
                        </tr>
                        <tr>
                            <td><label for="gender">Gender</label></td>
                            <td>
                                <div class="gender">
                                    <div class="item"><input type="radio" value="male" id="male" name="gen">
                                        <label for="male">Male</label>
                                    </div>
                                    <div class="item"><input type="radio" id="female" value="female" name="gen"><label
                                            for="female">Female</label></div>
                                    <div class="item"><input type="radio" id="others" value="others" name="gen"><label
                                            for="others">Others</label></div>

                                </div>
                                <span id="generr"> <%=errElement.gen%></span>
                            </td>
                        </tr>
                        <tr>
                            <td><label for="hobbies">Hobbies</label></td>
                            <td>
                                <div class="hobby">
                                    <div class="item"><input type="checkbox" id="sing" value="singing"
                                            name="hobbies" /><label for="sing">Singing</label></div>
                                    <div class="item"><input type="checkbox" id="dance" value="dancing"
                                            name="hobbies" /><label for="dance">Dancing</label></div>
                                    <div class="item"><input type="checkbox" id="swim" value="swimming"
                                            name="hobbies" /><label for="swim">Swimming</label></div>
                                    <div class="item"><input type="checkbox" id="read" value="reading "
                                            name="hobbies" /><label for="read">Reading</label></div>
                                </div>
                                <span id="hobbyerr"> <%=errElement.hobby%></span>
                            </td>
                        </tr>
                        <tr>
                            <td><label for="email">Email:</label></td>
                            <td><input class="req" type="text" id="email" name="email"
                                    value="<%=dataObj.email%>" /><span class="err"> <%=errElement.email%></span></td>
                        </tr>
                        <tr>
                            <td><label for="add">Address:</label></td>
                            <td><textarea class="req" id="add" name="add"><%=dataObj.add%></textarea><span
                                    class="err"> <%=errElement.add%></span></td>
                        </tr>
                        <tr>
                            <td style="text-align:center" colspan="2"><input type="submit" value="Submit" /></td>
                        </tr>
                    </table>
                </form>
                <%} else{%>
                    <form action="/simple_crud" method="post" onsubmit="return validate(event);">
                        <table>
                            <caption>
                                <h4>Students Registration Form</h4>
                            </caption>
                            <tr>
                                <td><label for="fname">First Name:</label></td>
                                <td><input class="req" type="text" id="fname" name="fname" /><span class="err"></span>
                                </td>
                            </tr>
                            <tr>
                                <td><label for="lname">Last Name:</label></td>
                                <td><input class="req" type="text" id="lname" name="lname" /><span class="err"></span>
                                </td>
                            </tr>
                            <tr>
                                <td><label for="age">Age:</label></td>
                                <td><input class="req" type="text" id="age" name="age" /><span class="err"></span></td>
                            </tr>
                            <tr>
                                <td><label for="pass">Password:</label></td>
                                <td><input class="req" type="text" id="pass" name="pass" /><span class="err"></span>
                                </td>
                            </tr>
                            <tr>
                                <td><label for="con">Contact:</label></td>
                                <td><input class="req" type="text" id="con" name="con" /><span class="err"></span> </td>
                            </tr>
                            <tr>
                                <td><label for="gender">Gender</label></td>
                                <td>
                                    <div class="gender gen">
                                        <div class="item"><input type="radio" value="male" id="male" name="gen">
                                            <label for="male">Male</label>
                                        </div>
                                        <div class="item"><input type="radio" id="female" value="female"
                                                name="gen"><label for="female">Female</label></div>
                                        <div class="item"><input type="radio" id="others" value="others"
                                                name="gen"><label for="others">Others</label></div>

                                    </div>
                                    <span id="generr"></span>
                                </td>
                            </tr>
                            <tr>
                                <td><label for="hobbies">Hobbies</label></td>
                                <td>
                                    <div class="hobby">
                                        <div class="item"><input type="checkbox" id="sing" value="singing"
                                                name="hobbies" /><label for="sing">Singing</label></div>
                                        <div class="item"><input type="checkbox" id="dance" value="dancing"
                                                name="hobbies" /><label for="dance">Dancing</label></div>
                                        <div class="item"><input type="checkbox" id="swim" value="swimming"
                                                name="hobbies" /><label for="swim">Swimming</label></div>
                                        <div class="item"><input type="checkbox" id="read" value="reading "
                                                name="hobbies" /><label for="read">Reading</label></div>
                                    </div>
                                    <span id="hobbyerr"></span>
                                </td>
                            </tr>
                            <tr>
                                <td><label for="email">Email:</label></td>
                                <td><input class="req" type="text" id="email" name="email" /><span class="err"></span>
                                </td>
                            </tr>
                            <tr>
                                <td><label for="add">Address:</label></td>
                                <td><textarea class="req" id="add" name="add"></textarea><span class="err"></span></td>
                            </tr>
                            <tr>
                                <td style="text-align:center" colspan="2"><input type="submit" value="Submit" /></td>
                            </tr>
                        </table>
                    </form>
                    <%}%>
    </div>

    <script>
                    function validate(e) {
                    
                        console.log("calling validate");
                        let req = document.getElementsByClassName("req");
                        let reqArr = Array.from(req);
                        reqArr.forEach(element => {
                            if (element.value == "") {
                                let err = element.nextElementSibling;
                                err.innerHTML = "  please enter some value ";
                                return false;
                            }
                            else {
                                let err = element.nextElementSibling;
                                err.innerHTML = "";
                            }
                        });

                        let fname = document.getElementById("fname");
                        let name = document.getElementById("lname");
                        let age = document.getElementById("age");
                        let contact = document.getElementById("con");
                        let pass = document.getElementById("pass");
                        let email = document.getElementById("email");
                        let add = document.getElementById("add");
                        console.log(contact);
                        console.log(contact.value);
                        if (fname.value.length > 15) {
                            let err = fname.nextElementSibling;
                            err.innerHTML = "your first name is exceeding the maximum limit";
                            return false;
                        }
                        if (lname.value.length > 15) {
                            let err = lname.nextElementSibling;
                            err.innerHTML = "your last name is exceeding the maximum limit";
                            return false;
                        }
                        let namePtn = /[a-zA-Z]/;
                        if (!namePtn.test(fname.value)) {
                            fname.nextElementSibling.innerHTML = "your name should only contain character";
                            return false;
                        }
                        if (!namePtn.test(lname.value)) {
                            lname.nextElementSibling.innerHTML = "your name should only contain character";
                            return false;
                        }
                        let agePtn = /^[0-9]{2}$/;
                        if (!agePtn.test(age.value)) {
                            console.log(agePtn.test(age.value));
                            age.nextElementSibling.innerHTML = "your age should be a number";
                            return false;
                        }
                        if (age.value < 15 || age.value > 25) {
                            age.nextElementSibling.innerHTML = "your age should be between 15 to 25";
                            return false;
                        }
                        let contactPtn = /^[0-9]{10}$/;
                        if (!contactPtn.test(contact.value)) {
                            contact.nextElementSibling.innerHTML = "your phone number should have only 10 digits";
                            return false;
                        }

                        let emailPtn = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
                        if (!emailPtn.test(email.value)) {
                            email.nextElementSibling.innerHTML = "please enter correct email";
                            return false;
                        }

                        let gender = document.getElementsByName('gen');
                        let genArr = Array.from(gender);
                        let hobbies = document.getElementsByName('hobbies');
                        let hobbArr = Array.from(hobbies);
                        let genflag = 0;
                        let hobbyflag = 0;
                        genArr.forEach((item) => {
                            if (item.checked) {
                                genflag++;
                            }
                        });
                        hobbArr.forEach((item) => {
                            if (item.checked) {
                                hobbyflag++;
                            }
                        });
                        console.log(genflag);
                        if (genflag == 0) {
                            document.getElementById('generr').innerHTML = "please select your gender";
                            return false;
                        }
                        else {
                            document.getElementById('generr').innerHTML = "";
                        }
                        if (hobbyflag == 0) {
                            document.getElementById('hobbyerr').innerHTML = "please select atleast one hobby";
                            return false;
                        }
                        else {
                            document.getElementById('hobbyerr').innerHTML = "";
                        }

                        return true;
                    }


                </script> 
</body>

</html>